<!DOCTYPE html>
<html lang="fr">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<title>Dymo Blanc sur Noir ‚Äì Derni√®re utilisation</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 15px;
        background: #121212; /* fond sombre */
        color: #ffffff;       /* texte blanc */
    }
    .card {
        background: #1e1e1e; /* carte l√©g√®rement plus claire */
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    label { font-weight: bold; }
    select, button {
        width: 100%;
        padding: 12px;
        margin-top: 8px;
        border-radius: 6px;
        border: 1px solid #444;
        font-size: 16px;
        background: #2c2c2c;
        color: #fff;
    }
    button {
        background: #4caf50;
        color: white;
        border: none;
    }
    #lastInfo {
        font-size: 18px;
        margin-top: 10px;
        color: #ddd;
    }
</style>

<!-- Firebase App & Database SDKs -->
<script type="module">
  // Import Firebase modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  // üî• Configuration Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCoTqBIbuO0EeGXHnVAFGr6kfMk9DlLU9M",
    authDomain: "dymo-blanc-sur-noir.firebaseapp.com",
    databaseURL: "https://dymo-blanc-sur-noir-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "dymo-blanc-sur-noir",
    storageBucket: "dymo-blanc-sur-noir.firebasestorage.app",
    messagingSenderId: "713858832334",
    appId: "1:713858832334:web:f51e42bebfbde9441afd9f"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  // ‚è≥ Affichage en temps r√©el
  const lastRef = ref(database, 'dymoBlancNoir/last');
  onValue(lastRef, (snapshot) => {
      const data = snapshot.val();
      const lastInfo = document.getElementById('lastInfo');
      if(data){
          lastInfo.innerHTML = `<strong>${data.user}</strong> √† <strong>${data.place}</strong><br><small>${data.time}</small>`;
      } else {
          lastInfo.innerHTML = "Aucune information encore.";
      }
  });

  // üíæ Fonction pour enregistrer les donn√©es
  window.saveInfo = function() {
      const user = document.getElementById("user").value;
      const place = document.getElementById("place").value;
      const time = new Date().toLocaleString("fr-FR");

      set(lastRef, { user, place, time })
        .then(() => alert("Information mise √† jour !"))
        .catch((error) => alert("Erreur : " + error));
  }
</script>

</head>
<body>

<h2>Dymo Blanc sur Noir ‚Äì Derni√®re utilisation</h2>

<div class="card">
    <h3>Derni√®re info :</h3>
    <div id="lastInfo">Chargement‚Ä¶</div>
</div>

<div class="card">
    <h3>Mettre √† jour</h3>

    <label>Utilisateur :</label>
    <select id="user">
        <option>S√©bastien</option>
        <option>Cyril</option>
        <option>Claire</option>
        <option>Anna</option>
        <option>L√©o</option>
        <option>Laurent</option>
        <option>Simon</option>
        <option>Cl√©ment</option>
        <option>Philippe</option>
        <option>Sadock</option>
        <option>Thomas</option>
        <option>Jonathan</option>
        <option>Lo√Øc</option>
        <option>Manu</option>
        <option>Autre</option>
    </select>

    <label>Lieu :</label>
    <select id="place">
        <option>Bureau de r√©gisseurs</option>
        <option>Atelier lumi√®re</option>
        <option>Studio son</option>
        <option>Atelier GS</option>
        <option>Atelier cub</option>
        <option>R√©gie GS</option>
        <option>R√©gie cub</option>
        <option>Autre</option>
    </select>

    <button onclick="saveInfo()">Enregistrer</button>
</div>

</body>
</html>
